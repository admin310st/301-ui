# Roadmap пользовательского интерфейса 301.st

## Текущий статус
- Готово и протестировано (Этап 1):
  - API авторизации (`/auth/*`), см. Wiki.
  - Отдельная статичная страница авторизации (`/auth/index.html` + `auth.js`), проверенная вместе с продовым API и Turnstile.
- В работе (Этап 2):
  - Модульный фронт на Vite + TS развернут, авторизационные формы работают с Turnstile.
  - Добавлен первый блок кабинета: мастер интеграции с Cloudflare (шаг 1 — загрузка Bootstrap Token с защитой Turnstile).
  - Turnstile стал «глобальным»: токен может переиспользоваться между формами, чтобы не отображать несколько виджетов на одной странице.

Актуальная спецификация API и описание OmniFlow лежат в Wiki основного проекта и доступны локально в `docs/301-wiki/` (точка входа — `Home.md`).

## Этапы развития
1. **Этап 1 — HTML + JS (MVP)** *(выполнен)*
   - Статичная страница авторизации (login/register) на чистом HTML + JS.
   - Запросы в прод-API `/auth/register` и `/auth/login` с `turnstile_token` из виджета.
   - Эндпойнт `/env` в воркере, который читает секрет `TURNSTILE_SITEKEY` и пробрасывает публичный ключ на фронт.
   - Базовый вывод ошибок и состояний формы, заглушка "dashboard" после логина.
   - Быстрая проверка: поднять `npm run dev`, убедиться, что формы отправляют запросы по API из Wiki основного проекта (точка входа `docs/301-wiki/Home.md`), а Turnstile рендерится с выданным ключом.

2. **Этап 2 — Модульный фронт + Vite** *(следующий)*
   - Перенос JS в структуру с модулями.
   - Подключение Vite как dev-server/bundler (без фреймворка).
   - TypeScript-типизация для работы с API.
   - Первые формы в новом стеке: операции с доменами для залогиненного клиента.

3. **Этап 3 — Vue 3 (базовый кабинет)**
   - Подключение Vue 3 + Composition API.
   - Страницы: Login, Register, Dashboard.
   - Начало выделения компонентов (Navbar, Sidebar, Card, FormField).

4. **Этап 4 — Pinia + глобальное состояние**
   - Стор `auth` (user, accounts, activeAccount).
   - Стор `ui` (тосты, лоадеры, глобальные флаги).
   - Router-guard для приватных маршрутов.

5. **Этап 5 — Tailwind + UI-kit**
   - Введение дизайн-токенов (цвета/отступы/радиусы).
   - Базовый набор UI-компонентов (Button, Input, Select, Modal, Table, Tabs).
   - Унификация внешнего вида кабинета.

6. **Этап 6 — Полноценный SPA-кабинет (`app.301.st`)**
   - Выделение отдельного проекта под SPA.
   - Интеграция с рабочими сущностями: проекты, домены, правила, логи.
   - Оптимизации (код-сплиттинг, lazy-loading, prefetch и т.п.).
