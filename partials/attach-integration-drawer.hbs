<!-- Attach Integration Drawer -->
<aside class="drawer" data-drawer="attach-integration" hidden>
  <div class="drawer__overlay" data-drawer-close></div>
  <div class="drawer__panel">
    <header class="drawer__header">
      <div class="drawer__title">
        <div>
          <h2 class="h4">
            <span class="icon" data-icon="mono/puzzle-plus"></span>
            Attach Integration
          </h2>
          <p class="text-muted">Connect an integration (API key) to this project</p>
        </div>
      </div>
      <button class="btn-close" type="button" data-drawer-close aria-label="Close">
        <span class="icon" data-icon="mono/close"></span>
      </button>
    </header>

    <div class="drawer__body">
      <div class="stack-list">
        <!-- Loading State (shown by default) -->
        <div class="loading-state" data-attach-integration-loading>
          <div class="spinner"></div>
          <p class="text-muted">Loading available integrations...</p>
        </div>

        <!-- Empty State -->
        <div class="empty-state" data-attach-integration-empty hidden>
          <div class="stack-md">
            <span class="icon icon--lg" data-icon="mono/puzzle"></span>
            <p class="text-muted">
              No available integrations. All your integrations are already attached to this project,
              or you don't have any integrations yet.
            </p>
            <p class="text-muted">
              <a href="/integrations.html" class="link">Go to Integrations</a> to connect Cloudflare or other providers first.
            </p>
          </div>
        </div>

        <!-- Selection Form (hidden until loaded) -->
        <div class="stack stack--md" data-attach-integration-form hidden>
          <div class="field">
            <label class="field__label">
              <span>Select integration</span>
              <span class="field__required">*</span>
            </label>
            <div class="dropdown" data-dropdown="attach-integration-select">
              <button
                class="btn-chip btn-chip--sm btn-chip--dropdown dropdown__trigger"
                type="button"
                aria-haspopup="menu"
                aria-expanded="false"
                data-attach-integration-select
                data-selected-value=""
              >
                <span class="btn-chip__label" data-selected-label>Choose an integration...</span>
                <span class="btn-chip__chevron icon" data-icon="mono/chevron-down"></span>
              </button>
              <div class="dropdown__menu dropdown__menu--fit-trigger" role="menu" data-attach-integration-menu>
                <!-- Options populated by JS -->
              </div>
            </div>
            <p class="field__hint text-muted">
              Only integrations not yet attached to this project are shown
            </p>
          </div>

          <!-- Status Panel -->
          <div class="panel" data-attach-integration-status hidden role="status" aria-live="polite"></div>
        </div>
      </div>
    </div>

    <footer class="drawer__footer">
      <button class="btn btn--ghost" type="button" data-drawer-close>Cancel</button>
      <button class="btn btn--primary" type="button" data-attach-integration-submit disabled>
        <span class="icon" data-icon="mono/check"></span>
        <span>Attach integration</span>
      </button>
    </footer>
  </div>
</aside>
