<!-- Edit Integration Drawer -->
<aside class="drawer" data-drawer="edit-integration" hidden>
  <div class="drawer__overlay" data-drawer-close></div>
  <div class="drawer__panel">
    <header class="drawer__header">
      <div class="drawer__title">
        <span class="icon" data-icon="mono/puzzle-edit"></span>
        <div>
          <h2 class="h4">Edit Integration</h2>
          <p class="text-muted">Manage API key settings and permissions.</p>
        </div>
      </div>
      <button class="btn-close" type="button" data-drawer-close aria-label="Close">
        <span class="icon" data-icon="mono/close"></span>
      </button>
    </header>

    <div class="drawer__body">
      <div class="stack stack--lg">
        <!-- Provider Info (Read-only) -->
        <div class="field">
          <label class="field__label">Provider</label>
          <div class="stack-inline stack-inline--sm">
            <span class="icon" data-icon="mono/key" data-integration-provider-icon></span>
            <strong data-integration-provider-name>Provider</strong>
          </div>
          <p class="field__hint text-muted">
            <span data-integration-account-id>—</span>
          </p>
        </div>

        <!-- Edit Form -->
        <form id="edit-integration-form" class="stack-md" data-form="edit-integration">
          <!-- Alias Field -->
          <div class="field">
            <label for="integration-alias" class="field__label">Alias</label>
            <input
              type="text"
              id="integration-alias"
              name="key_alias"
              class="input"
              placeholder="My Cloudflare Account"
              required
            />
            <p class="field__hint text-muted">Display name for this integration</p>
          </div>

          <!-- Status Field -->
          <div class="field">
            <label class="field__label">Status</label>
            <div>
              <button
                class="btn btn--sm btn--outline"
                type="button"
                data-integration-toggle="status"
                data-status="active"
                style="border-color: var(--ok);"
              >
                <span class="icon" data-icon="mono/check-circle" style="color: var(--ok);"></span>
                <span>Active</span>
              </button>
            </div>
            <p class="field__hint text-muted">
              Click to toggle between Active and Revoked
            </p>
          </div>
        </form>

        <!-- Rotate Token Hint (Cloudflare only, shown conditionally) -->
        <div class="panel panel--info" data-rotate-token-section hidden>
          <p>
            <span class="icon" data-icon="mono/lightbulb"></span>
            <span data-i18n="integrations.edit.rotateHint">To rotate the API token, reconnect the Cloudflare account via "Add integration → Cloudflare". The system will automatically update the token.</span>
          </p>
        </div>
      </div>
    </div>

    <footer class="drawer__footer">
      <button type="submit" form="edit-integration-form" class="btn btn--primary">
        <span class="icon" data-icon="mono/check"></span>
        <span>Save</span>
      </button>
      <button
        type="button"
        class="btn btn--cf"
        data-action="sync-integration"
        hidden
      >
        <span class="icon" data-icon="mono/web-sync"></span>
        <span>Sync</span>
      </button>
      <button
        type="button"
        class="btn btn--danger btn--outline"
        data-action="delete-integration"
      >
        <span class="icon" data-icon="mono/delete"></span>
        <span>Delete</span>
      </button>
      <button type="button" class="btn btn--ghost" data-drawer-close>Cancel</button>
    </footer>
  </div>
</aside>
