<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>301.st ¬∑ Auth</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/css/theme.css" />
    <link rel="stylesheet" href="/css/site.css" />
  </head>
  <body>
    <div
      id="GlobalNotice"
      class="global-notice"
      data-state="hidden"
      role="status"
      aria-live="polite"
    >
      <div class="global-notice__inner">
        <span class="global-notice__icon" aria-hidden="true"></span>
        <p id="GlobalNoticeText" class="global-notice__text"></p>
        <button
          type="button"
          class="global-notice__close"
          aria-label="Dismiss notification"
          data-i18n-aria="notice.close"
        >
          √ó
        </button>
      </div>
    </div>
    <header class="site-header">
      <div class="container header-bar">
        <a class="brand" href="/">301.st</a>
        <nav class="nav-links" data-onlogout data-i18n-aria="layout.nav.aria" aria-label="Authentication navigation">
          <a href="#login" data-route-link="login" data-i18n="layout.nav.login">Login</a>
          <a href="#register" data-route-link="register" data-i18n="layout.nav.register">Register</a>
          <a href="#reset" data-route-link="reset" data-i18n="layout.nav.reset">Forgot password?</a>
        </nav>
        <div class="nav-links" data-onlogin hidden>
          <span data-user-email></span>
          <button class="btn btn-secondary" data-action="logout" data-i18n="layout.nav.logout" aria-label="Log out">
            Log out
          </button>
        </div>
        <button
          type="button"
          class="btn btn-secondary btn-sm"
          data-theme-toggle
          aria-label="Toggle theme"
        >
          <span data-theme-icon="dark" aria-hidden="true">üåô</span>
          <span data-theme-icon="light" aria-hidden="true" hidden>‚òÄÔ∏è</span>
        </button>
        <nav
          class="btn-chip-group lang-switcher"
          aria-label="Language selection"
          data-i18n-aria="layout.langSwitcher.label"
        >
          <button
            type="button"
            class="btn-chip is-active"
            data-lang="en"
            data-i18n="layout.langSwitcher.en"
            data-i18n-aria="layout.langSwitcher.label"
          >
            EN
          </button>
          <button
            type="button"
            class="btn-chip"
            data-lang="ru"
            data-i18n="layout.langSwitcher.ru"
            data-i18n-aria="layout.langSwitcher.label"
          >
            RU
          </button>
        </nav>
      </div>
    </header>

    <main class="page">
      <section data-route="auth" id="auth">
        <div class="container auth-shell">
          <div class="auth-grid">
            <section class="auth-card">
              <p class="eyebrow" data-i18n="auth.hero.eyebrow">Production login</p>
              <h1 data-i18n="auth.hero.title">Access 301.st</h1>
              <p class="auth-subtitle" data-i18n="auth.hero.subtitle">
                Use email and password to access your account or request a reset.
              </p>

              <div
                class="btn-chip-group auth-tabs"
                role="tablist"
                data-i18n-aria="layout.headerTabsLabel"
                aria-label="Authentication actions"
              >
                <button type="button" class="btn-chip is-active" data-auth-tab="login" data-route-link="login" data-i18n="layout.nav.login">
                  Login
                </button>
                <button
                  type="button"
                  class="btn-chip"
                  data-auth-tab="register"
                  data-route-link="register"
                  data-i18n="layout.nav.register"
                >
                  Register
                </button>
                <button type="button" class="btn-chip" data-auth-tab="reset" data-route-link="reset" data-i18n="layout.nav.reset">
                  Forgot password?
                </button>
              </div>

              <form id="auth-login-form" data-form="login" data-auth-view="login">
                <div class="field">
                  <label class="field-label" for="signin-email" data-i18n="auth.login.emailLabel">Email</label>
                  <input
                    class="input"
                    id="signin-email"
                    name="email"
                    type="email"
                    autocomplete="email"
                    required
                    data-avatar-source
                    aria-describedby="login-status"
                  />
                </div>

                <div class="field">
                  <label class="field-label" for="signin-password" data-i18n="auth.login.passwordLabel">Password</label>
                  <input
                    class="input"
                    id="signin-password"
                    name="password"
                    type="password"
                    autocomplete="current-password"
                    required
                    aria-describedby="login-status"
                  />
                </div>

                <div class="auth-status" id="login-status" data-type="pending" data-form-status="login" data-i18n="auth.login.statusDefault">
                  Enter your email and password to sign in.
                </div>

                <div class="auth-actions">
                  <button
                    type="submit"
                    class="btn btn-primary"
                    data-auth-submit="login"
                    data-i18n="auth.login.submit"
                    data-i18n-aria="auth.login.submitAria"
                    aria-label="Sign in to 301.st"
                  >
                    Sign in
                  </button>
                  <a
                    href="#register"
                    class="btn btn-secondary"
                    data-auth-switch="register"
                    data-route-link="register"
                    data-i18n="auth.login.linkToRegister"
                  >
                    Create account
                  </a>
                </div>

                <div class="auth-links">
                  <a href="#register" data-auth-switch="register" data-route-link="register" data-i18n="auth.login.linkToRegister"
                    >Create account</a
                  >
                  <a href="#reset" data-auth-switch="reset" data-route-link="reset" data-i18n="auth.login.linkToReset"
                    >Forgot password?</a
                  >
                </div>
              </form>

              <form data-form="register" data-auth-view="register" hidden>
                <div class="field">
                  <label class="field-label" for="register-email" data-i18n="auth.login.emailLabel">Email</label>
                  <input class="input" id="register-email" name="email" type="email" autocomplete="email" required aria-describedby="register-status" />
                </div>
                <div class="field">
                  <label class="field-label" for="register-password" data-i18n="auth.login.passwordLabel">Password</label>
                  <input
                    class="input"
                    id="register-password"
                    name="password"
                    type="password"
                    autocomplete="new-password"
                    required
                    aria-describedby="register-status"
                  />
                </div>

                <div
                  class="auth-status"
                  data-type="pending"
                  data-form-status="register"
                  id="register-status"
                  data-i18n="auth.register.passwordHint"
                >
                  Must contain upper & lower case letters and at least one digit.
                </div>

                <div class="auth-actions">
                  <button
                    type="submit"
                    class="btn btn-primary"
                    data-auth-submit="register"
                    data-i18n="auth.register.submit"
                    data-i18n-aria="auth.register.submitAria"
                    aria-label="Create your 301.st account"
                  >
                    Create account
                  </button>
                  <a href="#login" class="btn btn-secondary" data-auth-switch="login" data-route-link="login" data-i18n="auth.links.toLogin"
                    >Back to login</a
                  >
                </div>
              </form>

              <div data-reset-step="request">
                <form data-form="reset-request" data-auth-view="reset" hidden>
                  <div class="field">
                    <label class="field-label" for="reset-email" data-i18n="auth.login.emailLabel">Email</label>
                    <input
                      class="input"
                      id="reset-email"
                      name="value"
                      type="email"
                      autocomplete="email"
                      required
                      aria-describedby="reset-status"
                    />
                  </div>

                  <input type="hidden" name="type" value="email" />

                  <div
                    class="auth-status"
                    data-type="pending"
                    data-form-status="reset-request"
                    id="reset-status"
                    data-i18n="auth.reset.statusDefault"
                  >
                    We‚Äôll send you a link to set a new password.
                  </div>

                  <div class="auth-actions">
                    <button
                      type="submit"
                      class="btn btn-primary"
                      data-i18n="auth.reset.requestButton"
                      data-i18n-aria="auth.reset.requestAria"
                      aria-label="Request password reset link"
                    >
                      Request reset link
                    </button>
                    <a href="#login" class="btn btn-secondary" data-auth-switch="login" data-route-link="login" data-i18n="auth.reset.linkToLogin"
                      >Back to login</a
                    >
                  </div>
                </form>
              </div>

              <div class="auth-status" data-type="pending" data-turnstile-status>
                <div class="turnstile-widget" role="img" aria-describedby="turnstile-help"></div>
                <p class="text-muted" id="turnstile-help" data-i18n="auth.turnstile.hint">
                  Turnstile protects login, registration, reset and Cloudflare bootstrap from bots.
                </p>
              </div>

              <div class="session-block">
                <div data-onlogin style="display: none">
                  <p class="muted" data-i18n="auth.session.active">Session is active.</p>
                  <p data-i18n-html="auth.session.signedInAs">
                    You are signed in as <strong data-auth-email data-user-email></strong>. Current role:
                    <span data-user-role>client:owner</span>.
                  </p>
                  <div class="auth-actions">
                    <button class="btn btn-secondary" data-action="logout" data-i18n="auth.session.logout" aria-label="Log out">
                      Log out
                    </button>
                  </div>
                </div>
                <div data-onlogout>
                  <p class="muted" data-i18n="auth.messages.notAuthenticated">You are not authenticated yet.</p>
                </div>
              </div>
            </section>

            <aside class="side-card">
              <h3 class="h2" data-i18n="cf.wizard.title">Cloudflare account bootstrap</h3>
              <p class="text-muted" data-i18n="cf.wizard.subtitle">
                Step 1 ¬∑ Paste your Account ID and Bootstrap API token.
              </p>

              <div class="avatar-preview">
                <div class="avatar-ring">
                  <img src="https://www.cloudflare.com/img/logo-cloudflare.svg" alt="Cloudflare" />
                </div>
                <p class="avatar-meta" data-i18n="cf.wizard.avatarMeta">
                  Orange actions below are reserved for Cloudflare-level changes.
                </p>
              </div>

              <form data-form="cf-bootstrap">
                <div class="field">
                  <label class="field-label" data-i18n="cf.wizard.accountIdLabel">Cloudflare Account ID</label>
                  <input
                    class="input"
                    type="text"
                    name="cf_account_id"
                    autocomplete="off"
                    data-i18n-placeholder="cf.wizard.accountIdPlaceholder"
                    placeholder="e.g. 1234567890abcdef1234567890abcdef"
                    required
                    aria-describedby="cf-status"
                  />
                </div>

                <div class="field">
                  <label class="field-label" data-i18n="cf.wizard.tokenLabel">Bootstrap API token</label>
                  <textarea
                    class="input"
                    name="cf_bootstrap_token"
                    rows="4"
                    data-i18n-placeholder="cf.wizard.tokenPlaceholder"
                    placeholder="Paste token with 'Account API Tokens: Edit' scope‚Ä¶"
                    required
                    aria-describedby="cf-token-hint cf-status"
                  ></textarea>
                  <p class="field-help text-muted" id="cf-token-hint" data-i18n="cf.wizard.tokenHint">
                    Created as <code>301st Bootstrap</code> with <em>Account API Tokens: Edit</em> permission.
                  </p>
                </div>

                <div class="auth-actions">
                  <button
                    type="submit"
                    class="btn btn-cf"
                    data-i18n="cf.wizard.submit"
                    data-i18n-aria="cf.wizard.submitAria"
                    aria-label="Save and verify Cloudflare token"
                  >
                    Save &amp; verify token
                  </button>
                </div>

                <div class="auth-status" data-type="pending" data-form-status="cf-bootstrap" id="cf-status" data-i18n="cf.wizard.statusStub">
                  This will hit <code>/auth/integrations/cloudflare/bootstrap</code> once wired.
                </div>
              </form>
            </aside>
          </div>
        </div>
      </section>

      <section data-route="verify" id="verify" hidden>
        <div class="container auth-shell">
          <div class="auth-grid">
            <div class="auth-card">
              <p class="eyebrow" data-i18n="auth.verify.eyebrow">Verification</p>
              <h2 data-i18n="auth.verify.title">Verifying‚Ä¶</h2>
              <p class="muted" data-i18n="auth.verify.subtitle">
                We are validating the link from your email. This takes a few seconds.
              </p>
              <div data-verify-status class="auth-status" hidden></div>
            </div>
          </div>
        </div>
      </section>

      <section class="auth-section" data-route="reset-confirm">
        <header class="auth-section__header">
          <p class="auth-eyebrow">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</p>
          <h1 class="auth-title">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å</h1>
          <p class="auth-subtitle">
            –ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ 301.st.
          </p>
        </header>

        <form data-form="reset-confirm" class="auth-form">
          <div class="form-status" data-status role="status" aria-live="polite"></div>

          <label class="form-field">
            <span class="form-label">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</span>
            <input
              name="password"
              type="password"
              autocomplete="new-password"
              required
            />
          </label>

          <label class="form-field">
            <span class="form-label">–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å</span>
            <input
              name="password_confirm"
              type="password"
              autocomplete="new-password"
              required
            />
          </label>

          <button type="submit" class="btn btn-primary">
            –û–±–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å
          </button>

          <p class="form-footer">
            <a href="#login" data-route-link="login">–í–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ –≤—Ö–æ–¥—É</a>
          </p>
        </form>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-grid">
        <div>
          <div class="brand">301.st</div>
          <p class="muted" data-i18n="layout.footer.description">Redirects and analytics.</p>
        </div>
        <div class="footer-links">
          <a href="#login" data-route-link="login" data-i18n="layout.nav.login">Login</a>
          <a href="#register" data-route-link="register" data-i18n="layout.nav.register">Register</a>
          <a href="#reset" data-route-link="reset" data-i18n="layout.nav.reset">Forgot password?</a>
        </div>
      </div>
    </footer>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
