<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>301.st · Auth</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="alternate icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="stylesheet" href="/css/theme.css" />
    <link rel="stylesheet" href="/css/layout.css" />
    <link rel="stylesheet" href="/css/site.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="page-shell header-bar">
        <a class="brand" href="/" aria-label="Бренд 301.st">
          <svg class="brand__logo" style="color: var(--blue-neon)" width="120" height="48" viewBox="0 0 120 48" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="301.st">
            <path d="M63.36.563C65.24.311 69.714.498 71.785.47c2.88.147 5.955-.22 8.808.117 6.783.802 11.57 5.176 14.063 11.14-2.475.035-5.862-.245-8.26.201-.331.061-.844.534-1.105.774-1.307-1.425-3.009-2.733-4.95-3.123-2.78-.56-5.81-.186-8.647-.26-2.022.025-4.073-.048-6.09.022-15.278.537-15.615 28.598-.304 29.31 2.312.106 4.813.041 7.141.038 2.491-.004 5.19.094 7.664-.07 2.426-.288 3.625-.972 5.531-2.339.341.308.807.583 1.2.833 2.47.114 5.401.033 7.902.026-2.352 5.292-7.052 9.72-12.96 10.557-2.5.354-5.631.153-8.132.167-6.836.036-13.78.658-19.483-3.92-10.637-8.011-12.008-25.348-4.321-35.796 3.173-4.313 8.256-6.851 13.52-7.58z" fill="currentColor"/>
            <path d="M119.706 15.228c-.025-.53-.067-1.064-.296-1.549-1.457-.565-12.882-.402-15.113-.332-5.47.171-11.85-.25-17.27.042-.73.574-.982.912-1.037 1.867-.134 2.384.043 4.847.034 7.235-.014 3.611-.063 7.201-.042 10.81.012 1.222.325 1.89 1.678 1.92 3.799.092 7.611.045 11.412.04l19.737-.015c.429-.23.652-.416.797-.901.206-.69.189-17.16.1-19.117M95.331 32.503h-7.702l.01-3.028c1.588-.005 11.653.268 12.379-.459.316-.314.377-.924.445-1.352q-.026-.076-.056-.155l-.035-.085c-.224-.57-.413-.902-1.055-1.06-3.444-.84-11.422 1.706-11.57-4.045a4 4 0 0 1-.05-.485c-.222-5.153 4.483-4.822 8.166-4.727 2.195.057 4.451.06 6.648.042l-.012 2.807c-1.576 0-10.084-.294-10.972.375-.441.334-.487.849-.58 1.358.111.492.202 1.168.696 1.346 3.985 1.443 9.834-1.906 11.861 3.428 1.06 6.544-3.333 6.044-8.173 6.04m23.032-12.26c-1.003-.008-5.029-.196-5.628.223.027 1.575.146 4.742.007 6.264q.051 2.823.044 5.646l-3.497.017c.002-1.381-.065-3.954.038-5.244-.143-1.22-.064-5.546.007-6.825-.71-.21-4.248-.12-5.234-.11l.004-3.044 14.27.007zM.151.053 17.26.016c9.733-.012 24.345-.952 24.494 13.051.046 4.254-.25 6.99-3.32 10.258 3.725 2.904 4.472 4.905 4.637 9.531.575 16.123-13.197 15.054-24.463 15.03L.133 47.824c-.026-2.025-.502-8.1.52-9.395L2 38.311c4.95-.019 27.682 1.096 30.507-1.414 1.085-.965 1.493-2.477 1.505-3.891.013-1.276-.394-2.782-1.15-3.862-1.893-2.707-6.13-2.05-9.308-2.067-1.952-.015-3.905-.007-5.857-.007l.007-7.304c1.73-.006 3.459.01 5.19-.007 2.252-.023 5.228.314 6.856-1.383.882-.918 1.205-2.22 1.222-3.488.014-1.097-.283-2.238-1.053-3.063-1.706-1.827-4.734-1.454-7.025-1.477L7.51 10.34l.027 27.854c-.008 1.322-.1 2.673.019 3.992.069.757.305 1.604.888 2.086.622.515 1.465.646 2.245.68 1.372.061 2.748.023 4.122.027l-.005 3.008L.182 47.945Q.151 24 .151.053" fill="currentColor"/>
          </svg>
        </a>
        <nav class="nav-links" data-onlogout data-i18n-aria="layout.nav.aria" aria-label="Authentication navigation">
          <a href="#login" data-route-link="login" data-i18n="layout.nav.login">Login</a>
          <a href="#register" data-route-link="register" data-i18n="layout.nav.register">Register</a>
          <a href="#reset" data-route-link="reset" data-i18n="layout.nav.reset">Forgot password?</a>
        </nav>
        <div class="nav-links" data-onlogin hidden>
          <span data-user-email></span>
          <button class="btn btn--ghost" data-action="logout" data-i18n="layout.nav.logout" aria-label="Log out">
            Log out
          </button>
        </div>
      </div>
    </header>

    <div
      id="GlobalNotice"
      class="app-alert app-alert--info"
      data-state="hidden"
      data-type="info"
      role="status"
      aria-live="polite"
    >
      <div class="app-alert__inner">
        <span class="icon app-alert__icon" aria-hidden="true">
          <svg>
            <use href="#i-mono-info"></use>
          </svg>
        </span>
        <div class="app-alert__content">
          <p id="GlobalNoticeText" class="app-alert__text"></p>
        </div>
        <button
          type="button"
          class="app-alert__close"
          aria-label="Close notification"
          data-i18n-aria="notice.close"
        >
          <span class="icon" aria-hidden="true">
            <svg>
              <use href="#i-mono-close"></use>
            </svg>
          </span>
        </button>
      </div>
    </div>

    <main class="page">
      <div class="page-shell">
        <header class="page-header">
          <div class="stack-list">
            <p class="eyebrow" data-i18n="auth.hero.eyebrow">Production login</p>
            <h1 class="h1" data-i18n="auth.hero.title">Access 301.st</h1>
            <p class="auth-subtitle" data-i18n="auth.hero.subtitle">
              Use email and password to access your account or request a reset.
            </p>
          </div>
          <div class="controls-row" aria-label="Quick actions">
            <nav
              class="btn-chip-group lang-switcher"
              aria-label="Language selection"
              data-i18n-aria="layout.langSwitcher.label"
            >
              <button
                type="button"
                class="btn-chip is-active"
                data-lang="en"
                data-i18n="layout.langSwitcher.en"
                data-i18n-aria="layout.langSwitcher.label"
              >
                EN
              </button>
              <button
                type="button"
                class="btn-chip"
                data-lang="ru"
                data-i18n="layout.langSwitcher.ru"
                data-i18n-aria="layout.langSwitcher.label"
              >
                RU
              </button>
            </nav>
            <button type="button" class="btn btn--ghost btn--sm theme-toggle" data-theme-toggle>
              <svg class="icon" aria-hidden="true">
                <use href="#i-mono-theme-light-dark"></use>
              </svg>
              <span class="sr-only" data-theme-icon="dark">Switch to light theme</span>
              <span class="sr-only" data-theme-icon="light" hidden>Switch to dark theme</span>
            </button>
          </div>
        </header>
        <section data-route="auth" id="auth">
          <div class="auth-shell">
            <div class="auth-grid">
              <section class="auth-card">

              <nav
                class="auth-tabs btn-chip-group"
                role="tablist"
                data-i18n-aria="layout.headerTabsLabel"
                aria-label="Authentication actions"
              >
                <button
                  type="button"
                  class="tabs__trigger btn-chip is-active"
                  data-auth-tab="login"
                  data-route-link="login"
                  data-i18n="layout.nav.login"
                >
                  Login
                </button>
                <button type="button" class="tabs__trigger btn-chip" data-auth-tab="register" data-route-link="register" data-i18n="layout.nav.register">
                  Register
                </button>
                <button type="button" class="tabs__trigger btn-chip" data-auth-tab="reset" data-route-link="reset" data-i18n="layout.nav.reset">
                  Forgot password?
                </button>
              </nav>

              <div data-auth-views>
                <section class="auth-view" data-auth-view="login" aria-hidden="false">
                  <form id="auth-login-form" data-form="login" class="auth-form">
                    <div class="avatar-preview">
                      <div class="avatar-ring" data-avatar-container>
                        <img class="avatar-icon" src="/img/anonymous-avatar.svg" alt="" aria-hidden="true" />
                      </div>
                      <p class="avatar-meta" data-avatar-label data-i18n="auth.login.avatarPlaceholder">
                        Enter email
                      </p>
                    </div>

                    <div class="field">
                      <label class="field-label" for="signin-email" data-i18n="auth.login.emailLabel">Email</label>
                      <input
                        class="input"
                        id="signin-email"
                        name="email"
                        type="email"
                        autocomplete="email"
                        required
                        data-avatar-source
                        aria-describedby="login-status"
                      />
                    </div>

                    <div class="field">
                      <label class="field-label" for="signin-password" data-i18n="auth.login.passwordLabel">Password</label>
                      <div class="password-field" data-password-field>
                        <input
                          class="input"
                          id="signin-password"
                          name="password"
                          type="password"
                          autocomplete="current-password"
                          required
                          aria-describedby="login-status"
                        />
                        <button
                          type="button"
                          class="password-toggle"
                          data-password-toggle
                          aria-label="Show password"
                        >
                          <svg class="icon" aria-hidden="true">
                            <use href="#i-mono-eye"></use>
                          </svg>
                        </button>
                      </div>
                    </div>

                    <div class="auth-status" id="login-status" data-type="pending" data-form-status="login" data-i18n="auth.login.statusDefault" role="status" aria-live="polite">
                      Enter your email and password to sign in.
                    </div>

                    <div class="auth-actions">
                      <button
                        type="submit"
                        class="btn btn--primary"
                        data-auth-submit="login"
                        data-i18n="auth.login.submit"
                        data-i18n-aria="auth.login.submitAria"
                        aria-label="Sign in to 301.st"
                      >
                        Sign in
                      </button>
                      <a
                        href="#register"
                        class="btn btn--ghost"
                        data-auth-switch="register"
                        data-route-link="register"
                        data-i18n="auth.login.linkToRegister"
                      >
                        Create account
                      </a>
                    </div>

                    <div class="auth-links">
                      <a href="#register" data-auth-switch="register" data-route-link="register" data-i18n="auth.login.linkToRegister"
                        >Create account</a
                      >
                      <a href="#reset" data-auth-switch="reset" data-route-link="reset" data-i18n="auth.login.linkToReset"
                        >Forgot password?</a
                      >
                    </div>

                    <div class="auth-social" aria-label="Social sign-in options">
                      <div class="auth-social__buttons">
                        <button
                          type="button"
                        class="btn btn--social btn--social-google"
                          data-social="google"
                        >
                          <span class="icon" aria-hidden="true">
                            <svg>
                              <use href="#i-brand-google"></use>
                            </svg>
                          </span>
                          <span data-social-label>Continue with Google</span>
                        </button>

                        <button
                          type="button"
                          class="btn btn--social btn--social-github"
                          data-social="github"
                        >
                          <span class="icon" aria-hidden="true">
                            <svg>
                              <use href="#i-brand-github"></use>
                            </svg>
                          </span>
                          <span data-social-label>Continue with GitHub</span>
                        </button>
                      </div>
                    </div>
                  </form>
                </section>

                <section class="auth-view" data-auth-view="register" hidden aria-hidden="true">
                  <form data-form="register" class="auth-form">
                    <div class="avatar-preview">
                      <div class="avatar-ring" data-avatar-container>
                        <img class="avatar-icon" src="/img/anonymous-avatar.svg" alt="" aria-hidden="true" />
                      </div>
                      <p class="avatar-meta" data-avatar-label data-i18n="auth.login.avatarPlaceholder">
                        Enter email
                      </p>
                    </div>

                    <div class="field">
                      <label class="field-label" for="register-email" data-i18n="auth.login.emailLabel">Email</label>
                      <input class="input" id="register-email" name="email" type="email" autocomplete="email" required aria-describedby="register-status" data-avatar-source />
                    </div>
                    <div class="field">
                      <label class="field-label" for="register-password" data-i18n="auth.login.passwordLabel">Password</label>
                      <div class="password-field" data-password-field>
                        <input
                          class="input"
                          id="register-password"
                          name="password"
                          type="password"
                          autocomplete="new-password"
                          required
                          aria-describedby="register-status"
                        />
                        <button
                          type="button"
                          class="password-toggle"
                          data-password-toggle
                          aria-label="Show password"
                        >
                          <svg class="icon" aria-hidden="true">
                            <use href="#i-mono-eye"></use>
                          </svg>
                        </button>
                    </div>
                    </div>

                    <div
                      class="auth-status"
                      data-type="pending"
                      data-form-status="register"
                      id="register-status"
                      data-i18n="auth.register.passwordHint"
                      role="status"
                      aria-live="polite"
                    >
                      Must contain upper & lower case letters and at least one digit.
                    </div>

                    <div class="auth-actions">
                      <button
                        type="submit"
                        class="btn btn--primary"
                        data-auth-submit="register"
                        data-i18n="auth.register.submit"
                        data-i18n-aria="auth.register.submitAria"
                        aria-label="Create your 301.st account"
                      >
                        Create account
                      </button>
                      <a href="#login" class="btn btn--ghost" data-auth-switch="login" data-route-link="login" data-i18n="auth.links.toLogin"
                        >Back to login</a
                      >
                    </div>
                  </form>
                </section>

                <section class="auth-view" data-auth-view="reset" hidden aria-hidden="true">
                  <div data-reset-mode="request">
                    <form data-form="reset-request" class="auth-form">
                      <div class="avatar-preview">
                        <div class="avatar-ring" data-avatar-container>
                          <img class="avatar-icon" src="/img/anonymous-avatar.svg" alt="" aria-hidden="true" />
                        </div>
                        <p class="avatar-meta" data-avatar-label data-i18n="auth.login.avatarPlaceholder">
                          Enter email
                        </p>
                      </div>

                      <div class="field">
                        <label class="field-label" for="reset-email" data-i18n="auth.login.emailLabel">Email</label>
                        <input
                          class="input"
                          id="reset-email"
                          name="value"
                          type="email"
                          autocomplete="email"
                          required
                          aria-describedby="reset-status"
                          data-avatar-source
                        />
                      </div>

                      <input type="hidden" name="type" value="email" />

                      <div
                        class="auth-status"
                        data-type="pending"
                        data-form-status="reset-request"
                        id="reset-status"
                        data-i18n="auth.reset.statusDefault"
                        role="status"
                        aria-live="polite"
                      >
                        We'll send you a link to set a new password.
                      </div>

                      <div class="auth-actions">
                        <button
                          type="submit"
                        class="btn btn--primary"
                        data-i18n="auth.reset.requestButton"
                          data-i18n-aria="auth.reset.requestAria"
                          aria-label="Request password reset link"
                        >
                          Request reset link
                        </button>
                      <a
                        href="#login"
                        class="btn btn--ghost"
                        data-auth-switch="login"
                        data-route-link="login"
                        data-i18n="auth.reset.linkToLogin"
                        >Back to login</a
                      >
                    </div>
                  </form>
                </div>

                  <div data-reset-mode="confirm" hidden>
                    <header class="auth-section__header">
                      <h2 class="auth-title" data-i18n="auth.resetConfirm.title">Set a new password</h2>
                      <p class="auth-subtitle" data-i18n="auth.resetConfirm.subtitle">
                        Choose a new password for your 301.st account.
                      </p>
                    </header>

                    <form data-form="reset-confirm" class="auth-form">
                      <div
                        class="auth-status"
                        data-type="pending"
                        data-form-status="reset-confirm"
                        id="reset-confirm-status"
                        data-i18n="auth.resetConfirm.statusDefault"
                        role="status"
                        aria-live="polite"
                      >
                        Make sure passwords match and are strong enough.
                      </div>

                      <div class="field">
                        <label class="field-label" for="reset-password" data-i18n="auth.resetConfirm.passwordLabel"
                          >New password</label
                        >
                        <div class="password-field" data-password-field>
                          <input
                            class="input"
                            id="reset-password"
                            name="password"
                            type="password"
                            autocomplete="new-password"
                            required
                            aria-describedby="reset-confirm-status"
                          />
                          <button
                            type="button"
                            class="password-toggle"
                            data-password-toggle
                            aria-label="Show password"
                          >
                            <svg class="icon" aria-hidden="true">
                              <use href="#i-mono-eye"></use>
                            </svg>
                          </button>
                        </div>
                      </div>

                      <div class="field">
                        <label class="field-label" for="reset-password-confirm" data-i18n="auth.resetConfirm.confirmLabel"
                          >Repeat password</label
                        >
                        <div class="password-field" data-password-field>
                          <input
                            class="input"
                            id="reset-password-confirm"
                            name="password_confirm"
                            type="password"
                            autocomplete="new-password"
                            required
                            aria-describedby="reset-confirm-status"
                          />
                          <button
                            type="button"
                            class="password-toggle"
                            data-password-toggle
                            aria-label="Show password"
                          >
                            <svg class="icon" aria-hidden="true">
                              <use href="#i-mono-eye"></use>
                            </svg>
                          </button>
                        </div>
                      </div>

                      <div class="auth-actions">
                        <button
                          type="submit"
                          class="btn btn--primary"
                          data-i18n="auth.resetConfirm.submit"
                          data-i18n-aria="auth.resetConfirm.submitAria"
                          aria-label="Update password and continue"
                        >
                          Update password
                        </button>
                        <a
                          href="#login"
                          class="btn btn--ghost"
                          data-auth-link="login"
                          data-i18n="auth.links.toLogin"
                        >
                          Back to login
                        </a>
                      </div>
                    </form>
                  </div>
                </section>

                <section class="auth-view" data-auth-view="verify" hidden aria-hidden="true">
                  <p class="eyebrow" data-i18n="auth.verify.eyebrow">Verification</p>
                  <h2 data-i18n="auth.verify.title">Verifying…</h2>
                  <p class="muted" data-i18n="auth.verify.subtitle">
                    We are validating the link from your email. This takes a few seconds.
                  </p>
                  <div data-verify-status class="auth-status" hidden></div>
                </section>
              </div>

              <div class="auth-status" data-type="pending" data-turnstile-status role="status" aria-live="polite">
                <div class="turnstile-widget" role="img" aria-describedby="turnstile-help"></div>
                <p class="text-muted" id="turnstile-help" data-i18n="auth.turnstile.hint">
                  Turnstile protects authorisation forms from bots.
                </p>
              </div>

              <div class="session-block">
                <div data-onlogin hidden>
                  <p class="muted" data-i18n="auth.session.active">Session is active.</p>
                  <p data-i18n-html="auth.session.signedInAs">
                    You are signed in as <strong data-auth-email data-user-email></strong>. Current role:
                    <span data-user-role>client:owner</span>.
                  </p>
                  <div class="auth-actions">
                    <button class="btn btn--ghost" data-action="logout" data-i18n="auth.session.logout" aria-label="Log out">
                      Log out
                    </button>
                  </div>
                </div>
                <div data-onlogout>
                  <p class="muted" data-i18n="auth.messages.notAuthenticated">You are not authenticated yet.</p>
                </div>
              </div>
            </section>

            <aside class="side-card">
              <h3 class="h2" data-i18n="cf.wizard.title">Cloudflare account bootstrap</h3>
              <p class="text-muted" data-i18n="cf.wizard.subtitle">
                Step 1 · Paste your Account ID and Bootstrap API token.
              </p>

              <div class="avatar-preview">
                <div class="avatar-ring avatar-ring--cloudflare">
                  <svg class="avatar-icon" aria-hidden="true" focusable="false">
                    <use href="#i-brand-cloudflare"></use>
                  </svg>
                  <span class="sr-only">Cloudflare</span>
                </div>
                <p class="avatar-meta" data-i18n="cf.wizard.avatarMeta">
                  Orange actions below are reserved for Cloudflare-level changes.
                </p>
              </div>

              <form data-form="cf-bootstrap">
                <div class="field">
                  <label class="field-label" data-i18n="cf.wizard.accountIdLabel">Cloudflare Account ID</label>
                  <input
                    class="input"
                    type="text"
                    name="cf_account_id"
                    autocomplete="off"
                    data-i18n-placeholder="cf.wizard.accountIdPlaceholder"
                    placeholder="e.g. 1234567890abcdef1234567890abcdef"
                    required
                    aria-describedby="cf-status"
                  />
                </div>

                <div class="field">
                  <label class="field-label" data-i18n="cf.wizard.tokenLabel">Bootstrap API token</label>
                  <textarea
                    class="textarea"
                    name="cf_bootstrap_token"
                    rows="4"
                    data-i18n-placeholder="cf.wizard.tokenPlaceholder"
                    placeholder="Paste token with 'Account API Tokens: Edit' scope…"
                    required
                    aria-describedby="cf-token-hint cf-status"
                  ></textarea>
                  <p class="field-help text-muted" id="cf-token-hint" data-i18n="cf.wizard.tokenHint">
                    Created as <code>301st Bootstrap</code> with <em>Account API Tokens: Edit</em> permission.
                  </p>
                </div>

                <div class="auth-actions">
                  <button
                    type="submit"
                    class="btn btn--cf"
                    data-i18n="cf.wizard.submit"
                    data-i18n-aria="cf.wizard.submitAria"
                    aria-label="Save and verify Cloudflare token"
                  >
                    Save &amp; verify token
                  </button>
                </div>

                <div class="auth-status" data-type="pending" data-form-status="cf-bootstrap" id="cf-status" data-i18n="cf.wizard.statusStub" role="status" aria-live="polite">
                  This will hit <code>/auth/integrations/cloudflare/bootstrap</code> once wired.
                </div>
              </form>
            </aside>
          </div>
        </div>
      </section>
      </div>

    </main>

    <footer class="site-footer">
      <div class="page-shell footer-grid">
        <div>
          <div class="brand" aria-label="Бренд 301.st">
            <svg class="brand__logo" aria-hidden="true">
              <use href="#i-brand-301"></use>
            </svg>
            <span class="brand__text">301.st</span>
          </div>
          <p class="muted" data-i18n="layout.footer.description">Redirects and analytics.</p>
        </div>
        <div class="footer-links">
          <a href="#login" data-route-link="login" data-i18n="layout.nav.login">Login</a>
          <a href="#register" data-route-link="register" data-i18n="layout.nav.register">Register</a>
          <a href="#reset" data-route-link="reset" data-i18n="layout.nav.reset">Forgot password?</a>
        </div>
      </div>
    </footer>

    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
